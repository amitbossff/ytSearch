<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video comunication</title>

  <link rel="manifest" href="manifest.json">

<link rel="preconnect" href="https://cdn.tailwindcss.com">
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://www.youtube.com">

<link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.2/dist/full.min.css" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<style>
body{
    font-family:'Inter',sans-serif;
    background: radial-gradient(circle at top,#1a0d00,#000000 70%);
    opacity:0;
    transition:opacity .4s ease;
}
.title-font{ font-family:'Anton',sans-serif; }
</style>
</head>

<body class="min-h-screen flex items-center justify-center text-white p-4">

<div class="w-full max-w-xl glass p-10 rounded-3xl shadow-2xl text-center backdrop-blur-xl border border-orange-500/20">

    <h1 data-aos="zoom-in"
        class="title-font text-6xl tracking-widest mb-6 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600 bg-clip-text text-transparent">
        Radhe Radhe 
    </h1>

    
    <div class="flex justify-center mb-6 gap-2" data-aos="fade-up">
        <button id="modeHour" class="btn btn-sm btn-warning rounded-full">
            Last Hour
        </button>
        <button id="modeToday" class="btn btn-sm btn-outline btn-warning rounded-full">
            Today
        </button>
    </div>

    
    <div class="flex mb-6" data-aos="fade-up">
        <input 
            id="searchBox"
            type="text"
            placeholder="Paste here..."
            class="input input-bordered w-full rounded-l-full bg-white/10 focus:border-orange-500 focus:outline-none"
        >
        <button 
            id="pasteBtn"
            class="btn rounded-r-full bg-gradient-to-r from-blue-500 to-blue-700 border-none active:scale-95 transition"
        >
            <i class="bi bi-clipboard text-xl"></i>
        </button>
    </div>

    <button id="redirectBtn"
        class="btn hidden rounded-full bg-gradient-to-r from-orange-500 to-red-500 border-none animate-pulse">
        <span class="loading loading-spinner"></span>
        Searching...
    </button>

    <div class="mt-6 text-sm opacity-80">
        Today Searches:
        <span id="dailyCount" class="text-orange-400 font-bold text-lg">0</span>

        <div id="countdown" class="text-xs mt-1 text-gray-400"></div>

        <div class="mt-2 text-gray-500 text-xs">
            • Radhe Radhe •
        </div>
    </div>

</div>

<div id="toast" class="toast toast-top toast-end hidden">
    <div class="alert alert-warning">
        <span>Clipboard permission denied.</span>
    </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>

<script>
window.addEventListener("load",()=>{
    document.body.style.opacity="1";
    if(typeof AOS!=="undefined"){ AOS.init({duration:600,once:true}); }
});
</script>

<script>
(function(){

const searchBox = document.getElementById("searchBox");
const pasteBtn = document.getElementById("pasteBtn");
const redirectBtn = document.getElementById("redirectBtn");
const dailyCount = document.getElementById("dailyCount");
const countdown = document.getElementById("countdown");
const toast = document.getElementById("toast");

const modeHour = document.getElementById("modeHour");
const modeToday = document.getElementById("modeToday");

const filters = {
    hour:"EgIIAQ%3D%3D",
    today:"EgIIAg%3D%3D"
};

let currentMode = localStorage.getItem("videoTradeMode") || "hour";
let redirecting = false;


function updateModeUI(){
    if(currentMode==="hour"){
        modeHour.classList.remove("btn-outline");
        modeHour.classList.add("btn-warning");
        modeToday.classList.add("btn-outline");
    }else{
        modeToday.classList.remove("btn-outline");
        modeToday.classList.add("btn-warning");
        modeHour.classList.add("btn-outline");
    }
}
updateModeUI();

modeHour.onclick=()=>{
    currentMode="hour";
    localStorage.setItem("videoTradeMode","hour");
    updateModeUI();
};
modeToday.onclick=()=>{
    currentMode="today";
    localStorage.setItem("videoTradeMode","today");
    updateModeUI();
};


function getMidnight(){
    const now=new Date();
    return new Date(now.getFullYear(),now.getMonth(),now.getDate()).getTime();
}
function getNextMidnight(){
    const now=new Date();
    return new Date(now.getFullYear(),now.getMonth(),now.getDate()+1).getTime();
}
function getData(){
    return JSON.parse(localStorage.getItem("videoTradePro"))||{};
}
function saveData(data){
    localStorage.setItem("videoTradePro",JSON.stringify(data));
}
function checkReset(){
    const todayMidnight=getMidnight();
    let data=getData();
    if(!data.lastReset||data.lastReset!==todayMidnight){
        data={count:0,lastReset:todayMidnight};
        saveData(data);
    }
}
function increase(){
    checkReset();
    let data=getData();
    data.count++;
    saveData(data);
    dailyCount.textContent=data.count;
}
function loadCount(){
    checkReset();
    dailyCount.textContent=getData().count||0;
}
loadCount();

function updateCountdown(){
    const diff=getNextMidnight()-Date.now();
    const h=Math.floor(diff/1000/60/60);
    const m=Math.floor(diff/1000/60)%60;
    const s=Math.floor(diff/1000)%60;
    countdown.textContent=`Reset in ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

function search(query){
    if(!query||redirecting)return;
    redirecting=true;
    redirectBtn.classList.remove("hidden");
    increase();

    const encoded=encodeURIComponent(query);
    const url=`https://www.youtube.com/results?search_query=${encoded}&sp=${filters[currentMode]}`;

    searchBox.value="";
    setTimeout(()=>location.replace(url),500);
}

searchBox.addEventListener("input",()=>{
    if(searchBox.value.trim().length>=1){
        search(searchBox.value.trim());
    }
});

pasteBtn.addEventListener("click",async()=>{
    try{
        const text=await navigator.clipboard.readText();
        if(text){
            searchBox.value=text.trim();
            search(text.trim());
        }
    }catch{
        toast.classList.remove("hidden");
        setTimeout(()=>toast.classList.add("hidden"),3000);
    }
});

document.addEventListener("visibilitychange",()=>{
    if(!document.hidden){
        redirecting=false;
        redirectBtn.classList.add("hidden");
        searchBox.value="";
        loadCount();
    }
});

})();
</script>

<script>

if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("sw.js").catch(console.error);
  });
}

</script>

</body>
</html>
